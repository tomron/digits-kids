(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function h(e,t,n){switch(e){case"+":return t+n;case"-":return t>n?t-n:null;case"*":return t*n;case"/":return n!==0&&t%n===0?t/n:null}}function O(e){if(e.selectedIndices.length!==2||e.selectedOperation===null)return e;const[t,n]=e.selectedIndices,r=e.numbers[t],s=e.numbers[n],o=e.selectedOperation;let i=h(o,r,s),c=r,u=s;if(i===null&&(i=h(o,s,r),c=s,u=r),i===null)return{...e,selectedIndices:[],selectedOperation:null,message:"That operation doesn't work! Try another one."};const g={numbers:[...e.numbers],operand1:c,operand2:u,operation:o,result:i},d=e.numbers.filter((E,y)=>y!==t&&y!==n);d.push(i);const b=d.includes(e.target);return{...e,numbers:d,selectedIndices:[],selectedOperation:null,history:[...e.history,g],moveCount:e.moveCount+1,status:b?"won":"playing",message:b?null:`${c} ${o} ${u} = ${i}`}}function z(e){if(e.history.length===0)return e;const t=e.history[e.history.length-1];return{...e,numbers:t.numbers,history:e.history.slice(0,-1),moveCount:e.moveCount-1,selectedIndices:[],selectedOperation:null,status:"playing",message:null}}function S(e){return{...e,numbers:[...e.initialNumbers],history:[],moveCount:0,selectedIndices:[],selectedOperation:null,status:"playing",message:null}}const C={easy:{label:"Easy",targetMin:1,targetMax:50,numberCount:4,operations:["+","-"],numberRange:[1,15]},medium:{label:"Medium",targetMin:20,targetMax:150,numberCount:5,operations:["+","-","*"],numberRange:[1,25]},hard:{label:"Hard",targetMin:50,targetMax:300,numberCount:6,operations:["+","-","*","/"],numberRange:[1,25],largeNumberRange:[10,50]}};function w(e,t){return Math.floor(Math.random()*(t-e+1))+e}function M(e){return e[Math.floor(Math.random()*e.length)]}function A(e){const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}function m(e,t="classic"){const n=C[e];for(let r=0;r<100;r++){const s=I(n,e,t);if(s)return s}return I(n,e,t,!0)}function I(e,t,n,r=!1){const s=R(e),o=[...s],i=Math.min(2,o.length-1);for(let u=0;u<i&&!(o.length<2);u++){const g=T(o,e.operations);if(g.length===0)break;const d=M(g),b=h(d.op,d.a,d.b),E=o.indexOf(d.a);o.splice(E,1);const y=o.indexOf(d.b);o.splice(y,1),o.push(b)}const c=M(o);return!r&&(c<e.targetMin||c>e.targetMax)||s.includes(c)?null:{difficulty:t,mode:n,target:c,numbers:A([...s]),initialNumbers:[...s],selectedIndices:[],selectedOperation:null,history:[],status:"playing",moveCount:0,message:null,timeRemaining:n==="timer"?60:null,timerStartedAt:n==="timer"?Date.now():null}}function R(e){const t=[],n=e.numberCount;for(let r=0;r<n;r++)if(r===n-1&&e.largeNumberRange)t.push(w(e.largeNumberRange[0],e.largeNumberRange[1]));else{let s;do s=w(e.numberRange[0],e.numberRange[1]);while(t.includes(s));t.push(s)}return t}function T(e,t){const n=[];for(let r=0;r<e.length;r++)for(let s=r+1;s<e.length;s++)for(const o of t){const i=e[r],c=e[s];h(o,i,c)!==null&&n.push({a:i,b:c,op:o}),(o==="-"||o==="/")&&h(o,c,i)!==null&&n.push({a:c,b:i,op:o})}return n}function $(e,t){t.innerHTML="",t.appendChild(P()),t.appendChild(B(e.difficulty)),t.appendChild(k(e.target)),t.appendChild(q(e)),t.appendChild(H(e)),t.appendChild(D(e)),t.appendChild(F()),e.message&&e.status!=="won"&&t.appendChild(G(e.message)),e.status==="won"&&t.appendChild(Y(e.moveCount))}function P(){const e=document.createElement("header");return e.className="game-header",e.innerHTML="<h1>Digits for Kids</h1>",e}function B(e){const t=document.createElement("div");t.className="difficulty-selector";const n=["easy","medium","hard"];for(const r of n){const s=document.createElement("button");s.textContent=C[r].label,s.className=`difficulty-btn ${r===e?"active":""}`,s.dataset.difficulty=r,t.appendChild(s)}return t}function k(e){const t=document.createElement("div");return t.className="target-display",t.innerHTML=`<span class="target-label">Target</span><span class="target-number">${e}</span>`,t}function q(e){const t=document.createElement("div");t.className=`number-tiles ${e.difficulty==="hard"?"hard-mode":""}`;for(let n=0;n<e.numbers.length;n++){const r=document.createElement("button");r.className="number-tile",r.textContent=String(e.numbers[n]),r.dataset.index=String(n),e.selectedIndices.includes(n)&&(r.classList.add("selected"),e.selectedIndices[0]===n&&r.classList.add("first"),e.selectedIndices[1]===n&&r.classList.add("second")),t.appendChild(r)}return t}function H(e){const t=document.createElement("div");t.className="operation-buttons";const n=C[e.difficulty],r={"+":"+","-":"−","*":"×","/":"÷"};for(const s of n.operations){const o=document.createElement("button");o.className=`op-btn op-${s==="+"?"add":s==="-"?"sub":s==="*"?"mul":"div"}`,o.textContent=r[s],o.dataset.operation=s,e.selectedOperation===s&&o.classList.add("selected"),t.appendChild(o)}return t}function D(e){const t=document.createElement("div");if(t.className="move-info",e.selectedIndices.length===2&&e.selectedOperation){const n=e.numbers[e.selectedIndices[0]],r=e.numbers[e.selectedIndices[1]],s={"+":"+","-":"−","*":"×","/":"÷"};t.innerHTML=`<span class="preview">${n} ${s[e.selectedOperation]} ${r}</span>`}else t.innerHTML=`<span class="moves">Moves: ${e.moveCount}</span>`;return t}function F(){const e=document.createElement("div");e.className="action-buttons";const t=[{id:"undo",label:"Undo"},{id:"restart",label:"Restart"},{id:"new-puzzle",label:"New Puzzle"}];for(const n of t){const r=document.createElement("button");r.className="action-btn",r.id=n.id,r.textContent=n.label,e.appendChild(r)}return e}function G(e){const t=document.createElement("div");return t.className="game-message",t.textContent=e,t}function Y(e){const t=document.createElement("div");t.className="win-overlay";const n=document.createElement("div");n.className="win-content";const r=document.createElement("div");r.className="win-stars",r.textContent="⭐ ⭐ ⭐";const s=document.createElement("h2");s.textContent="You got it!";const o=document.createElement("p");o.textContent=`Solved in ${e} move${e!==1?"s":""}!`;const i=document.createElement("button");return i.className="action-btn win-new-puzzle",i.id="win-new-puzzle",i.textContent="Play Again",n.appendChild(r),n.appendChild(s),n.appendChild(o),n.appendChild(i),t.appendChild(n),t}const N=["#ff6b6b","#ffd93d","#6bcb77","#4d96ff","#ff6ec7","#a855f7"],j=80,U=.003,_=.97;function K(){const e=document.createElement("canvas");e.className="confetti-canvas",e.width=window.innerWidth,e.height=window.innerHeight,document.body.appendChild(e);const t=e.getContext("2d"),n=[];for(let o=0;o<j;o++)n.push({x:e.width*(.3+Math.random()*.4),y:e.height*.3,vx:(Math.random()-.5)*8,vy:-(Math.random()*6+2),color:N[Math.floor(Math.random()*N.length)],size:Math.random()*8+4,alpha:1,rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*10});let r;function s(){t.clearRect(0,0,e.width,e.height);let o=!1;for(const i of n)i.x+=i.vx,i.y+=i.vy,i.vy+=U*60,i.vx*=_,i.alpha-=.008,i.rotation+=i.rotationSpeed,!(i.alpha<=0)&&(o=!0,t.save(),t.globalAlpha=Math.max(0,i.alpha),t.translate(i.x,i.y),t.rotate(i.rotation*Math.PI/180),t.fillStyle=i.color,t.fillRect(-i.size/2,-i.size/2,i.size,i.size*.6),t.restore());o?r=requestAnimationFrame(s):(cancelAnimationFrame(r),e.remove())}r=requestAnimationFrame(s)}let l,f,v=null;function V(e){f=e,l=m("easy"),L()}function L(){$(l,f),W(),l.status==="won"&&(p(),K()),l.status==="timeout"&&p(),l.mode==="timer"&&l.status==="playing"?J():p()}function a(e){l=e,L()}function W(){var e,t,n,r,s;f.querySelectorAll(".mode-btn").forEach(o=>{o.addEventListener("click",()=>{const i=o.dataset.mode;a(m(l.difficulty,i))})}),f.querySelectorAll(".difficulty-btn").forEach(o=>{o.addEventListener("click",()=>{const i=o.dataset.difficulty;a(m(i,l.mode))})}),f.querySelectorAll(".number-tile").forEach(o=>{o.addEventListener("click",()=>{if(l.status==="won")return;const i=parseInt(o.dataset.index,10);Q(i)})}),f.querySelectorAll(".op-btn").forEach(o=>{o.addEventListener("click",()=>{if(l.status==="won")return;const i=o.dataset.operation;X(i)})}),(e=document.getElementById("undo"))==null||e.addEventListener("click",()=>{a(z(l))}),(t=document.getElementById("restart"))==null||t.addEventListener("click",()=>{a(S(l))}),(n=document.getElementById("new-puzzle"))==null||n.addEventListener("click",()=>{a(m(l.difficulty,l.mode))}),(r=document.getElementById("win-new-puzzle"))==null||r.addEventListener("click",()=>{a(m(l.difficulty,l.mode))}),(s=document.getElementById("timeout-new-puzzle"))==null||s.addEventListener("click",()=>{a(m(l.difficulty,l.mode))})}function J(){p(),v=window.setInterval(()=>{if(l.mode!=="timer"||l.status!=="playing"||l.timerStartedAt===null){p();return}const e=Math.floor((Date.now()-l.timerStartedAt)/1e3),t=Math.max(0,60-e);if(t===0){a({...l,status:"timeout",timeRemaining:0});return}l={...l,timeRemaining:t};const n=document.getElementById("timer-display");if(n){const r=Math.floor(t/60),s=t%60,o=`${r}:${s.toString().padStart(2,"0")}`,i=n.querySelector(".timer-text");i&&(i.textContent=o)}},100)}function p(){v!==null&&(clearInterval(v),v=null)}function Q(e){const t=[...l.selectedIndices],n=t.indexOf(e);if(n!==-1){t.splice(n,1),a({...l,selectedIndices:t,message:null});return}if(t.length===0)a({...l,selectedIndices:[e],message:null});else if(t.length===1){const r={...l,selectedIndices:[t[0],e],message:null};r.selectedOperation!==null?a(O(r)):a(r)}else a({...l,selectedIndices:[t[0],e],message:null})}function X(e){if(l.selectedOperation===e){a({...l,selectedOperation:null,message:null});return}const t={...l,selectedOperation:e,message:null};t.selectedIndices.length===2?a(O(t)):a(t)}const x=document.getElementById("app");x&&V(x);
