(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function h(e,t,n){switch(e){case"+":return t+n;case"-":return t>n?t-n:null;case"*":return t*n;case"/":return n!==0&&t%n===0?t/n:null}}function z(e){if(e.selectedIndices.length!==2||e.selectedOperation===null)return e;const[t,n]=e.selectedIndices,o=e.numbers[t],i=e.numbers[n],r=e.selectedOperation;let s=h(r,o,i),c=o,u=i;if(s===null&&(s=h(r,i,o),c=i,u=o),s===null)return{...e,selectedIndices:[],selectedOperation:null,message:"That operation doesn't work! Try another one."};const g={numbers:[...e.numbers],operand1:c,operand2:u,operation:r,result:s},d=e.numbers.filter((E,y)=>y!==t&&y!==n);d.push(s);const b=d.includes(e.target);return{...e,numbers:d,selectedIndices:[],selectedOperation:null,history:[...e.history,g],moveCount:e.moveCount+1,status:b?"won":"playing",message:b?null:`${c} ${r} ${u} = ${s}`}}function L(e){if(e.history.length===0)return e;const t=e.history[e.history.length-1];return{...e,numbers:t.numbers,history:e.history.slice(0,-1),moveCount:e.moveCount-1,selectedIndices:[],selectedOperation:null,status:"playing",message:null}}function S(e){return{...e,numbers:[...e.initialNumbers],history:[],moveCount:0,selectedIndices:[],selectedOperation:null,status:"playing",message:null}}const C={easy:{label:"Easy",targetMin:1,targetMax:50,numberCount:4,operations:["+","-"],numberRange:[1,15]},medium:{label:"Medium",targetMin:20,targetMax:150,numberCount:5,operations:["+","-","*"],numberRange:[1,25]},hard:{label:"Hard",targetMin:50,targetMax:300,numberCount:6,operations:["+","-","*","/"],numberRange:[1,25],largeNumberRange:[10,50]}};function w(e,t){return Math.floor(Math.random()*(t-e+1))+e}function M(e){return e[Math.floor(Math.random()*e.length)]}function T(e){const t=[...e];for(let n=t.length-1;n>0;n--){const o=Math.floor(Math.random()*(n+1));[t[n],t[o]]=[t[o],t[n]]}return t}function m(e,t="classic"){const n=C[e];for(let o=0;o<100;o++){const i=N(n,e,t);if(i)return i}return N(n,e,t,!0)}function N(e,t,n,o=!1){const i=R(e),r=[...i],s=Math.min(2,r.length-1);for(let u=0;u<s&&!(r.length<2);u++){const g=A(r,e.operations);if(g.length===0)break;const d=M(g),b=h(d.op,d.a,d.b),E=r.indexOf(d.a);r.splice(E,1);const y=r.indexOf(d.b);r.splice(y,1),r.push(b)}const c=M(r);return!o&&(c<e.targetMin||c>e.targetMax)||i.includes(c)?null:{difficulty:t,mode:n,target:c,numbers:T([...i]),initialNumbers:[...i],selectedIndices:[],selectedOperation:null,history:[],status:"playing",moveCount:0,message:null,timeRemaining:n==="timer"?60:null,timerStartedAt:n==="timer"?Date.now():null}}function R(e){const t=[],n=e.numberCount;for(let o=0;o<n;o++)if(o===n-1&&e.largeNumberRange)t.push(w(e.largeNumberRange[0],e.largeNumberRange[1]));else{let i;do i=w(e.numberRange[0],e.numberRange[1]);while(t.includes(i));t.push(i)}return t}function A(e,t){const n=[];for(let o=0;o<e.length;o++)for(let i=o+1;i<e.length;i++)for(const r of t){const s=e[o],c=e[i];h(r,s,c)!==null&&n.push({a:s,b:c,op:r}),(r==="-"||r==="/")&&h(r,c,s)!==null&&n.push({a:c,b:s,op:r})}return n}function $(e,t){t.innerHTML="",t.appendChild(P()),t.appendChild(B(e.mode)),t.appendChild(k(e.difficulty)),t.appendChild(q(e.target)),e.mode==="timer"&&e.timeRemaining!==null&&t.appendChild(H(e.timeRemaining)),t.appendChild(D(e)),t.appendChild(F(e)),t.appendChild(G(e)),t.appendChild(U()),e.message&&e.status!=="won"&&e.status!=="timeout"&&t.appendChild(Y(e.message)),e.status==="won"&&t.appendChild(j(e.moveCount)),e.status==="timeout"&&t.appendChild(_())}function P(){const e=document.createElement("header");return e.className="game-header",e.innerHTML="<h1>Digits for Kids</h1>",e}function B(e){const t=document.createElement("div");t.className="mode-selector";const n=[{id:"classic",label:"Classic"},{id:"timer",label:"Timer (60s)"}];for(const o of n){const i=document.createElement("button");i.textContent=o.label,i.className=`mode-btn ${o.id===e?"active":""}`,i.dataset.mode=o.id,t.appendChild(i)}return t}function k(e){const t=document.createElement("div");t.className="difficulty-selector";const n=["easy","medium","hard"];for(const o of n){const i=document.createElement("button");i.textContent=C[o].label,i.className=`difficulty-btn ${o===e?"active":""}`,i.dataset.difficulty=o,t.appendChild(i)}return t}function q(e){const t=document.createElement("div");return t.className="target-display",t.innerHTML=`<span class="target-label">Target</span><span class="target-number">${e}</span>`,t}function H(e){const t=document.createElement("div");t.className="timer-display",t.id="timer-display";const n=Math.floor(e/60),o=e%60,i=`${n}:${o.toString().padStart(2,"0")}`,r=document.createElement("span");return r.className="timer-text",r.textContent=i,t.appendChild(r),t}function D(e){const t=document.createElement("div");t.className=`number-tiles ${e.difficulty==="hard"?"hard-mode":""}`;for(let n=0;n<e.numbers.length;n++){const o=document.createElement("button");o.className="number-tile",o.textContent=String(e.numbers[n]),o.dataset.index=String(n),e.selectedIndices.includes(n)&&(o.classList.add("selected"),e.selectedIndices[0]===n&&o.classList.add("first"),e.selectedIndices[1]===n&&o.classList.add("second")),t.appendChild(o)}return t}function F(e){const t=document.createElement("div");t.className="operation-buttons";const n=C[e.difficulty],o={"+":"+","-":"−","*":"×","/":"÷"};for(const i of n.operations){const r=document.createElement("button");r.className=`op-btn op-${i==="+"?"add":i==="-"?"sub":i==="*"?"mul":"div"}`,r.textContent=o[i],r.dataset.operation=i,e.selectedOperation===i&&r.classList.add("selected"),t.appendChild(r)}return t}function G(e){const t=document.createElement("div");if(t.className="move-info",e.selectedIndices.length===2&&e.selectedOperation){const n=e.numbers[e.selectedIndices[0]],o=e.numbers[e.selectedIndices[1]],i={"+":"+","-":"−","*":"×","/":"÷"};t.innerHTML=`<span class="preview">${n} ${i[e.selectedOperation]} ${o}</span>`}else t.innerHTML=`<span class="moves">Moves: ${e.moveCount}</span>`;return t}function U(){const e=document.createElement("div");e.className="action-buttons";const t=[{id:"undo",label:"Undo"},{id:"restart",label:"Restart"},{id:"new-puzzle",label:"New Puzzle"}];for(const n of t){const o=document.createElement("button");o.className="action-btn",o.id=n.id,o.textContent=n.label,e.appendChild(o)}return e}function Y(e){const t=document.createElement("div");return t.className="game-message",t.textContent=e,t}function j(e){const t=document.createElement("div");t.className="win-overlay";const n=document.createElement("div");n.className="win-content";const o=document.createElement("div");o.className="win-stars",o.textContent="⭐ ⭐ ⭐";const i=document.createElement("h2");i.textContent="You got it!";const r=document.createElement("p");r.textContent=`Solved in ${e} move${e!==1?"s":""}!`;const s=document.createElement("button");return s.className="action-btn win-new-puzzle",s.id="win-new-puzzle",s.textContent="Play Again",n.appendChild(o),n.appendChild(i),n.appendChild(r),n.appendChild(s),t.appendChild(n),t}function _(){const e=document.createElement("div");e.className="timeout-overlay";const t=document.createElement("div");t.className="timeout-content";const n=document.createElement("div");n.className="timeout-icon",n.textContent="⏱";const o=document.createElement("h2");o.textContent="Time's Up!";const i=document.createElement("p");i.textContent="Try again with a new puzzle!";const r=document.createElement("button");return r.className="action-btn timeout-new-puzzle",r.id="timeout-new-puzzle",r.textContent="New Puzzle",t.appendChild(n),t.appendChild(o),t.appendChild(i),t.appendChild(r),e.appendChild(t),e}const x=["#ff6b6b","#ffd93d","#6bcb77","#4d96ff","#ff6ec7","#a855f7"],K=80,V=.003,W=.97;function J(){const e=document.createElement("canvas");e.className="confetti-canvas",e.width=window.innerWidth,e.height=window.innerHeight,document.body.appendChild(e);const t=e.getContext("2d"),n=[];for(let r=0;r<K;r++)n.push({x:e.width*(.3+Math.random()*.4),y:e.height*.3,vx:(Math.random()-.5)*8,vy:-(Math.random()*6+2),color:x[Math.floor(Math.random()*x.length)],size:Math.random()*8+4,alpha:1,rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*10});let o;function i(){t.clearRect(0,0,e.width,e.height);let r=!1;for(const s of n)s.x+=s.vx,s.y+=s.vy,s.vy+=V*60,s.vx*=W,s.alpha-=.008,s.rotation+=s.rotationSpeed,!(s.alpha<=0)&&(r=!0,t.save(),t.globalAlpha=Math.max(0,s.alpha),t.translate(s.x,s.y),t.rotate(s.rotation*Math.PI/180),t.fillStyle=s.color,t.fillRect(-s.size/2,-s.size/2,s.size,s.size*.6),t.restore());r?o=requestAnimationFrame(i):(cancelAnimationFrame(o),e.remove())}o=requestAnimationFrame(i)}let l,p,v=null;function Q(e){p=e,l=m("easy"),O()}function O(){$(l,p),X(),l.status==="won"&&(f(),J()),l.status==="timeout"&&f(),l.mode==="timer"&&l.status==="playing"?Z():f()}function a(e){l=e,O()}function X(){var e,t,n,o,i;p.querySelectorAll(".mode-btn").forEach(r=>{r.addEventListener("click",()=>{const s=r.dataset.mode;a(m(l.difficulty,s))})}),p.querySelectorAll(".difficulty-btn").forEach(r=>{r.addEventListener("click",()=>{const s=r.dataset.difficulty;a(m(s,l.mode))})}),p.querySelectorAll(".number-tile").forEach(r=>{r.addEventListener("click",()=>{if(l.status==="won")return;const s=parseInt(r.dataset.index,10);ee(s)})}),p.querySelectorAll(".op-btn").forEach(r=>{r.addEventListener("click",()=>{if(l.status==="won")return;const s=r.dataset.operation;te(s)})}),(e=document.getElementById("undo"))==null||e.addEventListener("click",()=>{a(L(l))}),(t=document.getElementById("restart"))==null||t.addEventListener("click",()=>{a(S(l))}),(n=document.getElementById("new-puzzle"))==null||n.addEventListener("click",()=>{a(m(l.difficulty,l.mode))}),(o=document.getElementById("win-new-puzzle"))==null||o.addEventListener("click",()=>{a(m(l.difficulty,l.mode))}),(i=document.getElementById("timeout-new-puzzle"))==null||i.addEventListener("click",()=>{a(m(l.difficulty,l.mode))})}function Z(){f(),v=window.setInterval(()=>{if(l.mode!=="timer"||l.status!=="playing"||l.timerStartedAt===null){f();return}const e=Math.floor((Date.now()-l.timerStartedAt)/1e3),t=Math.max(0,60-e);if(t===0){a({...l,status:"timeout",timeRemaining:0});return}l={...l,timeRemaining:t};const n=document.getElementById("timer-display");if(n){const o=Math.floor(t/60),i=t%60,r=`${o}:${i.toString().padStart(2,"0")}`,s=n.querySelector(".timer-text");s&&(s.textContent=r)}},100)}function f(){v!==null&&(clearInterval(v),v=null)}function ee(e){const t=[...l.selectedIndices],n=t.indexOf(e);if(n!==-1){t.splice(n,1),a({...l,selectedIndices:t,message:null});return}if(t.length===0)a({...l,selectedIndices:[e],message:null});else if(t.length===1){const o={...l,selectedIndices:[t[0],e],message:null};o.selectedOperation!==null?a(z(o)):a(o)}else a({...l,selectedIndices:[t[0],e],message:null})}function te(e){if(l.selectedOperation===e){a({...l,selectedOperation:null,message:null});return}const t={...l,selectedOperation:e,message:null};t.selectedIndices.length===2?a(z(t)):a(t)}const I=document.getElementById("app");I&&Q(I);
